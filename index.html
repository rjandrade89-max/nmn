<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Casamento Fábio & Carla - Algarve</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&family=Pinyon+Script&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

    <!-- React & Babel CDNs (Versão 18 para estabilidade com Babel Standalone) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* --- VARIABLES & RESET --- */
        :root {
            --c-blue: #93A9D1;
            --c-darkBlue: #4B6584;
            --c-bg: #F5F8FA;
            --c-gold: #C5A059;
            --c-text: #2C3E50;
            --c-white: #FFFFFF;
            
            --font-serif: 'Playfair Display', serif;
            --font-script: 'Pinyon Script', cursive;
            --font-sans: 'Montserrat', sans-serif;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        html {
            width: 100%;
            scroll-behavior: smooth;
        }

        body {
            width: 100%;
            min-height: 100vh;
            font-family: var(--font-sans);
            color: var(--c-text);
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -webkit-overflow-scrolling: touch;
        }

        /* --- TYPOGRAPHY --- */
        .font-serif { font-family: var(--font-serif); }
        .font-script { font-family: var(--font-script); }
        .font-sans { font-family: var(--font-sans); }

        .text-gold { color: var(--c-gold); }
        .text-blue { color: var(--c-blue); }
        .text-darkBlue { color: var(--c-darkBlue); }
        .text-white { color: var(--c-white); }
        .uppercase { text-transform: uppercase; }
        .font-bold { font-weight: 600; }

        /* --- ANIMATIONS --- */
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes float { 
            0%, 100% { transform: translateY(0) rotate(0deg); } 
            50% { transform: translateY(-10px) rotate(1deg); } 
        }
        @keyframes pulse-slow { 
            0%, 100% { opacity: 1; } 
            50% { opacity: 0.5; } 
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(-5%); }
            50% { transform: translateY(0); }
        }
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .animate-fade-in { animation: fadeIn 1.5s ease-out forwards; }
        .animate-float { animation: float 6s ease-in-out infinite; }
        .animate-pulse-slow { animation: pulse-slow 3s infinite; }
        .animate-bounce { animation: bounce 1s infinite; }

        /* Scroll Reveal Animation */
        .scroll-reveal {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .scroll-reveal.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* --- LAYOUT --- */
        .app-wrapper {
            position: relative;
            width: 100%;
            min-height: 100vh;
            display: flex;
            justify-content: center;
        }

        /* SUBSTITUÍDO: Imagem de praia removida, cor light adicionada */
        .bg-color-layer {
            position: fixed;
            inset: 0;
            background: linear-gradient(135deg, #F5F8FA 0%, #E6EEF5 100%);
            z-index: 0;
        }

        .bg-overlay {
            position: fixed;
            inset: 0;
            background-color: rgba(147, 169, 209, 0.05);
            pointer-events: none;
            z-index: 0;
        }

        .main-container {
            position: relative;
            z-index: 10;
            width: 100%;
            max-width: 450px;
            min-height: 100vh;
            /* Removed background to avoid white rectangle */
            display: flex;
            flex-direction: column;
        }

        .paper-texture {
            position: fixed;
            inset: 0;
            background-image: url('https://www.transparenttextures.com/patterns/cream-paper.png');
            opacity: 0.3;
            pointer-events: none;
            z-index: 0;
        }

        /* --- INTRO SCREEN --- */
        .intro-overlay {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #F5F8FA;
            z-index: 100;
            transition: opacity 1s;
        }
        .intro-text {
            width: 80%;
            max-width: 300px;
            display: flex;
            justify-content: center;
            opacity: 0;
            animation: fadeIn 2s ease-out forwards;
        }

        /* --- ENVELOPE SCREEN --- */
        .envelope-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            width: 100%;
            transition: opacity 1s;
        }
        .envelope-screen.is-zooming {
            opacity: 0;
            pointer-events: none;
        }

        .envelope-header {
            position: absolute;
            top: 15%;
            text-align: center;
            transition: all 0.7s;
            z-index: 10;
        }
        .envelope-header.is-open {
            opacity: 0;
            transform: translateY(-40px);
        }

        .envelope-3d-container {
            position: relative;
            width: 320px;
            height: 220px;
            perspective: 1000px;
            cursor: pointer;
            z-index: 20;
        }

        .envelope-body {
            position: absolute;
            inset: 0;
            background-color: var(--c-blue);
            border-radius: 8px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            transform-style: preserve-3d;
            transition: transform 0.5s;
        }
        .envelope-3d-container:hover .envelope-body {
            transform: scale(1.02);
        }

        .invitation-card {
            position: absolute;
            width: 90%; height: 90%;
            background: white;
            border-radius: 4px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            z-index: 10;
            left: 5%; top: 5%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 1s ease-in-out;
        }
        .invitation-card.is-open {
            transform: translateY(-120px) scale(1.05) rotate(2deg);
        }

        .envelope-flap {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 50%;
            z-index: 30;
            transform-origin: top;
            transform-style: preserve-3d;
            transition: transform 0.7s ease-in-out;
        }
        .envelope-flap.is-open {
            transform: rotateX(180deg);
            z-index: 0;
        }
        .wax-seal {
            position: absolute;
            top: 90%; left: 50%;
            transform: translate(-50%, -50%);
            width: 80px; height: 80px;
            transition: opacity 0.3s;
        }
        .wax-seal.is-open { opacity: 0; }

        /* --- DASHBOARD --- */
        .dashboard-screen {
            width: 100%;
            min-height: 100vh;
            padding-bottom: 5rem;
            overflow: visible;
        }

        .masonry-grid {
            display: grid; grid-template-columns: 1fr 1fr;
            gap: 0.75rem; padding: 0 1rem;
            max-width: 450px; margin: 0.5rem auto 0;
        }
        .col-left { display: flex; flex-direction: column; gap: 1rem; }
        .col-right { display: flex; flex-direction: column; gap: 1rem; margin-top: 2rem; }

        .card { position: relative; cursor: pointer; transition: transform 0.3s; }
        .card:hover { transform: scale(1.02); }
        .card-white { background: white; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .card-details { padding: 4px; padding-bottom: 2rem; }
        .card-rsvp { padding: 0.75rem; border-left: 4px solid var(--c-darkBlue); display: flex; flex-direction: column; justify-content: center; position: relative; overflow: hidden; }
        .card-timeline { padding: 4px; padding-bottom: 1.5rem; overflow: visible; }
        .card-std { padding: 0.75rem; text-align: center; }
        .card-gallery { background: #FDFBF7; padding: 0.75rem; border-right: 4px solid var(--c-gold); position: relative; overflow: hidden; }
        .card-faq {
            aspect-ratio: 1/1; border-radius: 50%; background: var(--c-darkBlue);
            color: white; display: flex; flex-direction: column; align-items: center; justify-content: center;
            border: 4px solid var(--c-bg); outline: 1px solid var(--c-darkBlue); position: relative;
        }

        /* Tape */
        .tape-top {
            position: absolute; width: 30px; height: 10px;
            background-color: rgba(255, 255, 255, 0.5);
            top: -5px; left: 50%; transform: translateX(-50%) rotate(-2deg);
            box-shadow: 0 1px 2px rgba(0,0,0,0.1); z-index: 20;
        }
        .tape-corner {
            position: absolute; width: 40px; height: 12px;
            background-color: rgba(255, 255, 255, 0.4);
            transform: rotate(45deg); top: 5px; right: -10px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1); z-index: 20;
        }

        /* Modal */
        .overlay-backdrop {
            position: fixed; inset: 0; z-index: 50;
            background: rgba(0,0,0,0.4); backdrop-filter: blur(4px);
            display: flex; align-items: flex-end; justify-content: center;
            opacity: 0; pointer-events: none; transition: opacity 0.5s;
        }
        .overlay-backdrop.visible { opacity: 1; pointer-events: auto; }
        @media (min-width: 640px) { .overlay-backdrop { align-items: center; } }

        .overlay-content {
            background: var(--c-bg);
            width: 100%;
            height: 80dvh; 
            max-height: 85dvh;
            overflow-y: auto;
            border-top-left-radius: 24px;
            border-top-right-radius: 24px;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.2);
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            position: relative;
            z-index: 60;
            -webkit-overflow-scrolling: touch; /* Essential for scroll inside modal */
            overscroll-behavior: contain;
        }
        .overlay-backdrop.visible .overlay-content { transform: translateY(0); }
        @media (min-width: 640px) {
            .overlay-content { max-width: 600px; border-radius: 16px; transform: translateY(20px) scale(0.95); height: 80vh; max-height: 800px; }
            .overlay-backdrop.visible .overlay-content { transform: translateY(0) scale(1); }
        }

        .close-btn-container {
            position: sticky; top: 0; right: 0;
            display: flex; justify-content: flex-end; padding: 1rem;
            background: linear-gradient(to bottom, var(--c-bg) 80%, transparent); z-index: 70;
        }
        .close-btn {
            padding: 0.5rem; background: rgba(147, 169, 209, 0.1);
            border-radius: 50%; border: none; cursor: pointer; color: var(--c-darkBlue);
        }

        /* Word Search Styles */
        .word-search-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 4px;
            margin: 1rem auto;
            max-width: 350px;
            background: white;
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .ws-cell {
            aspect-ratio: 1/1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: var(--font-sans);
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            border-radius: 4px;
            transition: background 0.2s;
            user-select: none;
        }
        .ws-cell.selected { background-color: var(--c-gold); color: white; }
        .ws-cell.found { background-color: #A3B18A; color: white; }

        /* Quiz Styles */
        .quiz-container {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        .quiz-option {
            width: 100%;
            padding: 0.75rem;
            margin-bottom: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #fff;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s;
            font-family: var(--font-sans);
            font-size: 0.9rem;
        }
        .quiz-option.correct { background-color: #A3B18A; color: white; border-color: #A3B18A; }
        .quiz-option.incorrect { background-color: #EF4444; color: white; border-color: #EF4444; }
        
        /* Utils */
        .timeline-item { position: relative; padding-bottom: 2rem; }
        .timeline-dot {
            position: absolute; left: -30px; top: 5px;
            width: 14px; height: 14px; background: var(--c-bg);
            border: 3px solid var(--c-blue); border-radius: 50%;
        }
        .gallery-grid { column-count: 2; column-gap: 1rem; }
        .gallery-item { break-inside: avoid; margin-bottom: 1rem; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .tab-btn {
            flex: 1; padding: 0.75rem; border: none; background: transparent;
            font-family: var(--font-sans); font-weight: 500; color: #666; cursor: pointer;
            border-radius: 6px; transition: all 0.2s;
        }
        .tab-btn.active { background: white; color: var(--c-darkBlue); box-shadow: 0 1px 3px rgba(0,0,0,0.1); font-weight: 600; }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^19.2.4",
    "react/": "https://esm.sh/react@^19.2.4/",
    "react-dom/": "https://esm.sh/react-dom@^19.2.4/"
  }
}
</script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- CONSTANTS ---
        const COUPLE_NAMES = "Carla & Fábio";
        const WEDDING_DATE = "19.09.2026";
        const WEDDING_FULL_DATE = "Sábado, 19 de Setembro de 2026";
        
        const AUDIO_BG = "https://kaligroup.pt/wp-content/uploads/2026/02/Christina-Perri-ft.-Steve-Kazee-A-Thousand-Years-Pt.-2.mp3";

        const IMG_POOL = "https://assets.tivolihotels.com/image/upload/q_auto,f_auto,c_limit,w_1920/media/minor/tivoli/images/hotels/tcar/gallery/galleryimage1920x1280/tcar_pool.jpg";
        const IMG_MAIN_COUPLE = "https://kaligroup.pt/wp-content/uploads/2025/12/WhatsApp-Image-2025-12-03-at-11.23.02-e1764761985495.jpeg";
        const IMG_QUINTA = "https://builder.livingtours.com/public/images/produtos/9NG9AUXSa9Quinta-do-Canhoto-14.jpg";
        
        // Fundo de praia removido.
        
        const IMG_LOGO = "https://lh3.googleusercontent.com/d/1hiFpX4mRddQA6UIBKR8FAxnI39S8lwvV";
        const IMG_ENVELOPE_LINER = "https://lh3.googleusercontent.com/d/1JXSfzNiZhS7bUI_7irjIbLxScV-pmDes";
        const IMG_SEAL_EXT = "https://lh3.googleusercontent.com/d/1ejqhVy20VZ8EXv-eSMXfPamtelfkVBpp";
        const IMG_SEAL_INT = "https://lh3.googleusercontent.com/d/14Je8a9w8mxMigbig0Ngss1BLOBG0h-4P";
        const IMG_FLORAL_CORNER_TL = "https://drive.google.com/thumbnail?id=1WVOJithpJNrHHzdcjbyaxkw7sI1Z0EIS&sz=w1000";
        const IMG_FLORAL_BOUQUET = "https://drive.google.com/thumbnail?id=17CD_uN-fLJpj_X5UXitD9IdD9LoKB3iI&sz=w1000";
        const IMG_FLORAL_SINGLE_1 = "https://drive.google.com/thumbnail?id=1BapeQ3wM_HW_fO-YlEvwo-rpuj931AA7&sz=w1000";
        const IMG_FLORAL_SINGLE_2 = "https://drive.google.com/thumbnail?id=12rOPLewSsfcrTJlREzz9zIYqzI_rTi0t&sz=w1000";
        const IMG_FLORAL_SINGLE_3 = "https://drive.google.com/thumbnail?id=1_PrPeiuvFGjbTjvqx4_OF30wLJruEUQ7&sz=w1000";
        const IMG_FLORAL_NEW_1 = "https://drive.google.com/thumbnail?id=17Ky1s7mq3OQetl06bRyD0QD8z7tbeVff&sz=w1000";
        const IMG_FLORAL_NEW_2 = "https://drive.google.com/thumbnail?id=1YqfE3ev276jWOYGm8fplHpcHkyRSL7j-&sz=w1000";
        const IMG_FLORAL_NEW_3 = "https://drive.google.com/thumbnail?id=1TLSbz3Qr-t8_OBGPZR6KgB83OTFbsH8D&sz=w1000";

        const GALLERY_IMAGES = [
            "https://kaligroup.pt/wp-content/uploads/2026/01/3-scaled.jpeg",
            "https://kaligroup.pt/wp-content/uploads/2026/01/4.jpeg",
            "https://kaligroup.pt/wp-content/uploads/2026/01/5-scaled.jpeg",
            "https://kaligroup.pt/wp-content/uploads/2026/01/6-scaled.jpeg",
            "https://kaligroup.pt/wp-content/uploads/2026/01/7-scaled.jpeg",
            "https://kaligroup.pt/wp-content/uploads/2026/01/8-scaled.jpeg",
            "https://kaligroup.pt/wp-content/uploads/2026/01/9-scaled.jpeg",
            "https://kaligroup.pt/wp-content/uploads/2026/01/10.jpeg"
        ];

        const RSVP_PHONE = "924 103 098";
        const RSVP_PHONE_CLEAN = "351924103098";
        const MAP_TIVOLI_SRC = "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3808.1895750491085!2d-8.46286838812983!3d37.093936850969826!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd1ab208c30ecee5%3A0x27941a4c14dafca9!2sTivoli%20Carvoeiro%20Algarve%20Resort!5e1!3m2!1spt-BR!2sus!4v1769160824924!5m2!1spt-BR!2sus";
        const MAP_CANHOTO_SRC = "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3807.238542171154!2d-8.23144758812913!3d37.112856349896035!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd1acf3201d06d49%3A0xa8045a2667997fdb!2sQuinta%20do%20Canhoto%20Adega!5e1!3m2!1spt-BR!2sus!4v1769160892728!5m2!1spt-BR!2sus";

        const TIMELINE_DATA = [
            { time: "12:30", title: "Chegada", description: "Receção dos convidados no Tivoli Carvoeiro." },
            { time: "13:30", title: "Cerimónia", description: "A nossa cerimónia de união." },
            { time: "15:00", title: "Copos de Água", description: "Deslocação para a Quinta do Canhoto." },
            { time: "17:00", title: "Jantar & Festa", description: "Jantar na adega, seguido de festa até de madrugada." }
        ];

        const FAQ_DATA = [
            { question: "O que não posso vestir?", answer: "Pedimos gentilmente que evitem as cores: Azul Claro, Branco e Bege." },
            { question: "Há transporte entre locais?", answer: "Sim, providenciaremos transporte entre o Tivoli Carvoeiro e a Quinta do Canhoto." },
            { question: "Lista de Presentes", answer: "A vossa presença é o maior presente. Se desejarem contribuir, teremos uma caixa no dia." }
        ];

        const QUIZ_DATA = {
            carla: [
                { q: "Qual a cor favorita da Carla?", options: ["Azul", "Rosa", "Verde"], answer: "Rosa" },
                { q: "Qual o animal favorito?", options: ["Gato", "Cão", "Cavalo"], answer: "Cão" },
                { q: "Onde nasceu?", options: ["Portugal", "Brasil", "Espanha"], answer: "Brasil" }
            ],
            fabio: [
                { q: "Qual a cor favorita do Fábio?", options: ["Azul", "Vermelho", "Amarelo"], answer: "Vermelho" },
                { q: "Qual o animal favorito?", options: ["Gato", "Cão", "Pássaro"], answer: "Cão" },
                { q: "Onde nasceu?", options: ["Lisboa", "Portimão", "Carvoeiro"], answer: "Carvoeiro" },
                { q: "Em que clube NÃO jogou?", options: ["C.F. Os Armacenenses", "CFE Lagos", "CD Odiáxere"], answer: "CD Odiáxere" }
            ]
        };

        // --- COMPONENTS ---

        const FlowerCorner = ({ className, style, src }) => (
            <img src={src || IMG_FLORAL_CORNER_TL} className={className} style={{ display: 'block', ...style }} alt="" />
        );

        const FlowerSingle = ({ className, style, variant = 1 }) => {
            let src = IMG_FLORAL_SINGLE_1;
            if (variant === 4) src = IMG_FLORAL_NEW_1;
            else if (variant === 3) src = IMG_FLORAL_SINGLE_3;
            else if (variant === 5) src = IMG_FLORAL_NEW_2;
            return <img src={src} className={className} style={{ display: 'block', ...style }} alt="" />;
        };

        const QuizGame = () => {
            const [person, setPerson] = useState('carla');
            const [currentQIndex, setCurrentQIndex] = useState(0);
            const [score, setScore] = useState(0);
            const [showResult, setShowResult] = useState(false);
            const [selectedOption, setSelectedOption] = useState(null);
            const [isAnswered, setIsAnswered] = useState(false);

            const questions = QUIZ_DATA[person];
            const currentQ = questions[currentQIndex];

            const handleOptionClick = (option) => {
                if (isAnswered) return;
                setSelectedOption(option);
                setIsAnswered(true);
                
                if (option === currentQ.answer) setScore(score + 1);

                setTimeout(() => {
                    if (currentQIndex < questions.length - 1) {
                        setCurrentQIndex(currentQIndex + 1);
                        setSelectedOption(null);
                        setIsAnswered(false);
                    } else {
                        setShowResult(true);
                    }
                }, 1500);
            };

            const resetQuiz = (newPerson) => {
                setPerson(newPerson);
                setCurrentQIndex(0);
                setScore(0);
                setShowResult(false);
                setSelectedOption(null);
                setIsAnswered(false);
            };

            if (showResult) {
                return (
                    <div style={{ textAlign: 'center', padding: '1rem' }}>
                        <h4 className="font-serif text-darkBlue" style={{ fontSize: '1.5rem', marginBottom: '1rem' }}>Resultado: {person === 'carla' ? 'Carla' : 'Fábio'}</h4>
                        <div style={{ fontSize: '3rem', fontWeight: 'bold', color: '#A3B18A', marginBottom: '1rem' }}>{score}/{questions.length}</div>
                        <div style={{ display: 'flex', gap: '1rem', justifyContent: 'center' }}>
                            <button onClick={() => resetQuiz(person)} style={{ padding: '0.5rem 1rem', borderRadius: '20px', border: '1px solid #ccc', background: 'white' }}>Tentar de novo</button>
                            <button onClick={() => resetQuiz(person === 'carla' ? 'fabio' : 'carla')} style={{ padding: '0.5rem 1rem', borderRadius: '20px', border: 'none', background: '#A3B18A', color: 'white' }}>
                                Jogar {person === 'carla' ? 'Fábio' : 'Carla'}
                            </button>
                        </div>
                    </div>
                )
            }

            return (
                <div className="quiz-container">
                    <div style={{ display: 'flex', justifyContent: 'center', marginBottom: '1.5rem', gap: '1rem' }}>
                        <button onClick={() => resetQuiz('carla')} style={{ padding: '0.5rem 1rem', borderRadius: '20px', border: 'none', background: person === 'carla' ? '#93A9D1' : '#eee', color: person === 'carla' ? 'white' : '#666' }}>Carla</button>
                        <button onClick={() => resetQuiz('fabio')} style={{ padding: '0.5rem 1rem', borderRadius: '20px', border: 'none', background: person === 'fabio' ? '#4B6584' : '#eee', color: person === 'fabio' ? 'white' : '#666' }}>Fábio</button>
                    </div>
                    <div style={{ marginBottom: '1rem' }}>
                        <p style={{ fontSize: '0.8rem', color: '#999' }}>Pergunta {currentQIndex + 1} de {questions.length}</p>
                        <h4 style={{ fontSize: '1.1rem', fontWeight: '600', color: '#2C3E50', marginTop: '0.5rem' }}>{currentQ.q}</h4>
                    </div>
                    <div style={{ display: 'flex', flexDirection: 'column', gap: '0.5rem' }}>
                        {currentQ.options.map((opt, idx) => {
                            let className = "quiz-option";
                            if (isAnswered) {
                                if (opt === currentQ.answer) className += " correct";
                                else if (opt === selectedOption) className += " incorrect";
                            }
                            return (
                                <button key={idx} className={className} onClick={() => handleOptionClick(opt)} disabled={isAnswered}>{opt}</button>
                            );
                        })}
                    </div>
                </div>
            );
        };

        const WordSearchGame = () => {
            const GRID_SIZE = 8;
            const WORDS = ["CARLA", "FABIO", "AMOR", "FESTA", "ALGARVE"];
            const INITIAL_GRID = [
                ['C','A','R','L','A','X','Y','Z'],
                ['B','L','G','A','R','V','E','F'],
                ['T','I','V','O','L','I','P','A'],
                ['F','A','B','I','O','Q','W','B'],
                ['E','S','T','A','M','O','R','I'],
                ['S','F','E','S','T','A','K','O'],
                ['T','U','V','W','X','Y','Z','A'],
                ['A','L','G','A','R','V','E','B'],
            ];
            const [selectedIndices, setSelectedIndices] = useState([]);
            const [foundWords, setFoundWords] = useState([]);
            
            const handleCellClick = (row, col) => {
                const index = row * GRID_SIZE + col;
                if (selectedIndices.includes(index)) {
                    setSelectedIndices(selectedIndices.filter(i => i !== index));
                } else {
                    const newSelection = [...selectedIndices, index].sort((a,b) => a-b);
                    setSelectedIndices(newSelection);
                    const letters = newSelection.map(idx => INITIAL_GRID[Math.floor(idx/GRID_SIZE)][idx%GRID_SIZE]).join('');
                    if (WORDS.includes(letters) && !foundWords.includes(letters)) {
                        setFoundWords([...foundWords, letters]);
                        setSelectedIndices([]);
                    }
                }
            };
            
            return (
                <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
                    <p style={{ marginBottom: '1rem', color: '#666' }}>Encontra: <span className="font-bold">{WORDS.filter(w => !foundWords.includes(w)).join(', ')}</span></p>
                    {foundWords.length > 0 && <div style={{ marginBottom: '1rem', color: '#A3B18A', fontWeight: 'bold' }}>Encontraste: {foundWords.join(', ')}!</div>}
                    <div className="word-search-grid">
                        {INITIAL_GRID.map((row, rIdx) => row.map((letter, cIdx) => {
                            const index = rIdx * GRID_SIZE + cIdx;
                            return <div key={`${rIdx}-${cIdx}`} className={`ws-cell ${selectedIndices.includes(index) ? 'selected' : ''}`} onClick={() => handleCellClick(rIdx, cIdx)}>{letter}</div>
                        }))}
                    </div>
                </div>
            );
        };

        const DetailOverlay = ({ section, onClose }) => {
            const [isVisible, setIsVisible] = useState(false);
            const [activeTab, setActiveTab] = useState('tivoli');
            const [gameTab, setGameTab] = useState('words');

            useEffect(() => { setTimeout(() => setIsVisible(true), 10); }, []);
            const handleClose = () => { setIsVisible(false); setTimeout(onClose, 400); };

            const renderContent = () => {
                switch(section) {
                    case 'timeline': return (
                        <div style={{ marginTop: '1rem' }}>
                            <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
                                <h3 className="font-serif text-blue" style={{ fontSize: '2rem' }}>Cronograma</h3>
                                <p className="uppercase text-gold" style={{ fontSize: '0.7rem' }}>{WEDDING_FULL_DATE}</p>
                            </div>
                            <div style={{ borderLeft: '1px solid rgba(163, 177, 138, 0.3)', marginLeft: '1rem', paddingLeft: '2rem' }}>
                                {TIMELINE_DATA.map((item, idx) => (
                                    <div key={idx} className="timeline-item">
                                        <span className="timeline-dot"></span>
                                        <span className="font-serif text-gold" style={{ fontSize: '1.5rem', display: 'block' }}>{item.time}</span>
                                        <h4 className="font-sans font-bold uppercase" style={{ fontSize: '0.9rem' }}>{item.title}</h4>
                                        <p className="font-sans" style={{ fontSize: '0.9rem', color: '#666' }}>{item.description}</p>
                                    </div>
                                ))}
                            </div>
                        </div>
                    );
                    case 'gallery': return (
                        <div style={{ marginTop: '1rem' }}>
                            <div style={{ textAlign: 'center', marginBottom: '2rem' }}>
                                <h3 className="font-serif text-blue" style={{ fontSize: '2rem' }}>Galeria</h3>
                            </div>
                            <div className="gallery-grid">
                                {GALLERY_IMAGES.map((imgSrc, idx) => (
                                    <div key={idx} className="gallery-item animate-fade-in" style={{ animationDelay: `${idx * 100}ms` }}>
                                        <img src={imgSrc} style={{ width: '100%' }} alt="" />
                                    </div>
                                ))}
                            </div>
                        </div>
                    );
                    case 'faq': return (
                        <div style={{ marginTop: '1rem' }}>
                             <div style={{ backgroundColor: '#FEF2F2', padding: '1.5rem', borderRadius: '12px', textAlign: 'center', marginBottom: '1.5rem', border: '1px solid #FECACA' }}>
                                 <h4 style={{ fontWeight: 'bold', color: '#991B1B', fontSize: '0.85rem' }}>DRESS CODE</h4>
                                 <p style={{ fontSize: '1rem', color: '#B91C1C' }}>Proibido: Azul Claro, Branco e Bege.</p>
                            </div>
                            {FAQ_DATA.map((item, idx) => (
                                <div key={idx} style={{ backgroundColor: 'white', padding: '1.5rem', borderRadius: '12px', marginBottom: '1rem', boxShadow: '0 1px 3px rgba(0,0,0,0.05)' }}>
                                    <h4 className="font-serif text-darkBlue" style={{ fontWeight: 'bold' }}>{item.question}</h4>
                                    <p style={{ fontSize: '0.9rem', color: '#555' }}>{item.answer}</p>
                                </div>
                            ))}
                        </div>
                    );
                    case 'minigames': return (
                        <div style={{ marginTop: '1rem', maxWidth: '600px', margin: '0 auto' }}>
                            <div style={{ textAlign: 'center', marginBottom: '1.5rem' }}>
                                <h3 className="font-serif text-blue" style={{ fontSize: '2rem' }}>Jogos</h3>
                            </div>
                            <div style={{ display: 'flex', padding: '4px', backgroundColor: '#f3f4f6', borderRadius: '8px', marginBottom: '1.5rem' }}>
                                <button onClick={() => setGameTab('words')} className={`tab-btn ${gameTab === 'words' ? 'active' : ''}`}>Sopa de Letras</button>
                                <button onClick={() => setGameTab('quiz')} className={`tab-btn ${gameTab === 'quiz' ? 'active' : ''}`}>Quiz</button>
                            </div>
                            {gameTab === 'words' ? <WordSearchGame /> : <QuizGame />}
                        </div>
                    );
                    case 'details': return (
                         <div style={{ marginTop: '1rem' }}>
                            <div style={{ display: 'flex', padding: '4px', backgroundColor: '#f3f4f6', borderRadius: '8px', marginBottom: '1.5rem' }}>
                               <button onClick={() => setActiveTab('tivoli')} className={`tab-btn ${activeTab === 'tivoli' ? 'active' : ''}`}>Hotel & Cerimónia</button>
                               <button onClick={() => setActiveTab('canhoto')} className={`tab-btn ${activeTab === 'canhoto' ? 'active' : ''}`}>Copo D'água</button>
                            </div>
                            {activeTab === 'tivoli' ? (
                               <div className="animate-fade-in">
                                  <div style={{ height: '16rem', borderRadius: '12px', overflow: 'hidden', marginBottom: '1rem' }}>
                                    <img src={IMG_POOL} style={{ width: '100%', height: '100%', objectFit: 'cover' }} alt="Tivoli" />
                                  </div>
                                  <div style={{ borderRadius: '12px', overflow: 'hidden' }}>
                                    <iframe src={MAP_TIVOLI_SRC} width="100%" height="250" style={{border:0}} loading="lazy"></iframe>
                                  </div>
                               </div>
                            ) : (
                               <div className="animate-fade-in">
                                  <div style={{ height: '16rem', borderRadius: '12px', overflow: 'hidden', marginBottom: '1rem' }}>
                                    <img src={IMG_QUINTA} style={{ width: '100%', height: '100%', objectFit: 'cover' }} alt="Quinta" />
                                  </div>
                                  <div style={{ borderRadius: '12px', overflow: 'hidden' }}>
                                    <iframe src={MAP_CANHOTO_SRC} width="100%" height="250" style={{border:0}} loading="lazy"></iframe>
                                  </div>
                               </div>
                            )}
                         </div>
                    );
                    case 'rsvp': return (
                        <div style={{ marginTop: '1rem', display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '1.5rem' }}>
                             <div style={{ width: '5rem', height: '5rem', backgroundColor: '#A3B18A', borderRadius: '50%', display: 'flex', alignItems: 'center', justifyContent: 'center', color: 'white' }} className="animate-bounce">
                                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/></svg>
                             </div>
                             <div style={{ textAlign: 'center' }}>
                                <h3 className="font-serif" style={{ fontSize: '2.25rem', color: '#2F3E32' }}>Confirmação</h3>
                                <p className="font-bold text-darkBlue" style={{ fontSize: '1.5rem' }}>{RSVP_PHONE}</p>
                             </div>
                             <a href={`https://wa.me/${RSVP_PHONE_CLEAN}`} target="_blank" style={{ padding: '1rem 2rem', backgroundColor: '#3A4B40', color: 'white', borderRadius: '999px', textDecoration: 'none', fontWeight: 'bold' }}>Confirmar por WhatsApp</a>
                        </div>
                    );
                    default: return null;
                }
            };

            return (
                <div className={`overlay-backdrop ${isVisible ? 'visible' : ''}`} onClick={handleClose}>
                    <div className="overlay-content" onClick={e => e.stopPropagation()}>
                        <div className="close-btn-container">
                           <button onClick={handleClose} className="close-btn">
                             <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M18 6 6 18"/><path d="m6 6 18 18"/></svg>
                           </button>
                        </div>
                        <div style={{ padding: '0 1.5rem 3rem 1.5rem' }}>{renderContent()}</div>
                    </div>
                </div>
            );
        };

        const EnvelopeScreen = ({ onOpen, onStartAudio }) => {
            const [isOpen, setIsOpen] = useState(false);
            const [isZooming, setIsZooming] = useState(false);

            const handleOpen = () => {
                if (isOpen) return;
                if (onStartAudio) onStartAudio();
                setIsOpen(true);
                setTimeout(() => {
                    setIsZooming(true);
                    setTimeout(onOpen, 800);
                }, 1200);
            };

            return (
                <div className={`envelope-screen ${isZooming ? 'is-zooming' : ''}`}>
                    <div className={`envelope-header ${isOpen ? 'is-open' : ''}`}>
                        <h1 className="font-serif" style={{ fontSize: '1.8rem', marginBottom: '0.5rem' }}>{COUPLE_NAMES}</h1>
                        <p className="font-sans text-blue uppercase font-bold" style={{ fontSize: '0.75rem', letterSpacing: '0.2em' }}>{WEDDING_DATE}</p>
                    </div>
                    <div className="envelope-3d-container" onClick={handleOpen}>
                        <div className="envelope-body">
                            <div className={`invitation-card ${isOpen ? 'is-open' : ''}`}>
                                <div style={{ width: '100%', height: '100%', border: '1px solid rgba(147, 169, 209, 0.2)', padding: '8px', display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center' }}>
                                    <img src={IMG_LOGO} alt="Logo" style={{ maxWidth: '80%', maxHeight: '60px', objectFit: 'contain', marginBottom: '8px' }} />
                                    <p className="font-script text-gold" style={{ fontSize: '1.8rem', marginBottom: '4px' }}>Convite</p>
                                    <p className="font-serif text-center" style={{ fontSize: '0.7rem', borderTop: '1px solid rgba(197, 160, 89, 0.3)', borderBottom: '1px solid rgba(197, 160, 89, 0.3)', padding: '4px 16px', color: '#666' }}>{WEDDING_DATE}</p>
                                    <p className="font-script text-darkBlue" style={{ fontSize: '1rem', marginTop: '12px', textAlign: 'center' }}>O início do nosso 'Para Sempre'</p>
                                </div>
                            </div>
                            <div style={{ position: 'absolute', bottom: 0, left: 0, width: '100%', height: '100%', zIndex: 20, pointerEvents: 'none' }}>
                               <svg style={{ position: 'absolute', bottom: 0, left: 0, width: '100%', height: '100%' }} viewBox="0 0 320 220" preserveAspectRatio="none">
                                 <path d="M0,220 L160,110 L320,220 Z" fill="#4B6584" opacity="0.9" />
                                 <path d="M0,0 L0,220 L160,110 Z" fill="#93A9D1" />
                                 <path d="M320,0 L320,220 L160,110 Z" fill="#93A9D1" />
                               </svg>
                            </div>
                            <div className={`envelope-flap ${isOpen ? 'is-open' : ''}`}>
                               <svg style={{ position: 'absolute', top: 0, left: 0, width: '100%', height: '100%', filter: 'drop-shadow(0 4px 6px rgba(0,0,0,0.1))' }} viewBox="0 0 320 110" preserveAspectRatio="none"><path d="M0,0 L160,110 L320,0 Z" fill="#93A9D1" /></svg>
                               <div className={`wax-seal ${isOpen ? 'is-open' : ''}`}>
                                  <div style={{ position: 'relative', width: '100%', height: '100%' }}>
                                      <img src={IMG_SEAL_EXT} style={{ position: 'absolute', inset: 0, width: '100%', height: '100%', animation: 'spin-slow 10s linear infinite' }} />
                                      <img src={IMG_SEAL_INT} style={{ position: 'absolute', inset: 0, width: '100%', height: '100%', transform: 'scale(0.55)' }} />
                                  </div>
                               </div>
                            </div>
                        </div>
                    </div>
                    <div style={{ marginTop: '3rem', transition: 'opacity 0.5s', opacity: isOpen ? 0 : 1 }} className={!isOpen ? 'animate-pulse-slow' : ''}>
                        <p className="font-serif" style={{ fontStyle: 'italic', color: 'rgba(75, 101, 132, 0.6)' }}>Toque para abrir</p>
                    </div>
                </div>
            );
        };

        const DashboardScreen = ({ isAudioPlaying, onToggleAudio }) => {
            const [activeSection, setActiveSection] = useState(null);

            useEffect(() => {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('is-visible');
                            observer.unobserve(entry.target);
                        }
                    });
                }, { threshold: 0.1 });
                document.querySelectorAll('.scroll-reveal').forEach(el => observer.observe(el));
                return () => observer.disconnect();
            }, []);

            return (
                <div className="dashboard-screen" style={{ position: 'relative' }}>
                    <div style={{ position: 'absolute', top: '30%', right: '-1.5rem', width: '4.5rem', zIndex: 0, pointerEvents: 'none', opacity: 0.7 }}>
                        <FlowerSingle variant={4} style={{ width: '100%', transform: 'rotate(15deg)' }} />
                    </div>
                    
                    <div style={{ position: 'relative', width: '70%', maxWidth: '220px', margin: '3rem auto 2rem auto', display: 'flex', justifyContent: 'center', zIndex: 10 }}>
                        <div style={{ position: 'absolute', top: '-45px', left: '-35px', width: '180px', zIndex: 0, pointerEvents: 'none', transform: 'rotate(-10deg)' }}>
                            <img src={IMG_FLORAL_BOUQUET} style={{ width: '100%', display: 'block' }} />
                        </div>
                        <div style={{ position: 'relative', width: '100%', zIndex: 10 }}>
                            <img src={IMG_ENVELOPE_LINER} style={{ width: '100%', display: 'block', filter: 'drop-shadow(0 8px 16px rgba(0,0,0,0.15))' }} />
                        </div>
                    </div>

                    <div className="masonry-grid" style={{ paddingBottom: '4rem', position: 'relative', zIndex: 10 }}>
                        <div className="col-left">
                            <div className="scroll-reveal" onClick={() => setActiveSection('details')}>
                                <div className="card card-white card-details animate-float" style={{ animationDelay: '0s' }}>
                                    <div className="tape-top"></div>
                                    <div style={{ width: '100%', height: '7rem', overflow: 'hidden', background: '#eee' }}>
                                        <img src={IMG_QUINTA} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />
                                    </div>
                                    <div style={{ textAlign: 'center', marginTop: '0.5rem' }}><p className="font-serif font-bold" style={{ fontSize: '0.9rem' }}>{COUPLE_NAMES}</p></div>
                                </div>
                            </div>
                            <div className="scroll-reveal" onClick={() => setActiveSection('rsvp')} style={{ marginTop: '1rem' }}>
                                <div className="card card-white card-rsvp animate-float" style={{ animationDelay: '2s' }}>
                                    <p className="font-serif font-bold text-center text-darkBlue" style={{ fontSize: '1.5rem', borderBottom: '1px solid #4B6584' }}>Presença</p>
                                </div>
                            </div>
                            <div className="scroll-reveal" onClick={() => setActiveSection('gallery')} style={{ marginTop: '1rem' }}>
                                <div className="card card-white card-timeline animate-float" style={{ animationDelay: '0.5s' }}>
                                    <div style={{ width: '100%', height: '10rem', overflow: 'hidden', position: 'relative' }}>
                                        <img src={IMG_MAIN_COUPLE} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />
                                        <div style={{ position: 'absolute', inset: 0, backgroundColor: 'rgba(75, 101, 132, 0.1)' }}></div>
                                    </div>
                                    <p className="font-script text-darkBlue" style={{ textAlign: 'center', fontSize: '1.4rem' }}>Galeria</p>
                                </div>
                            </div>
                        </div>
                        <div className="col-right">
                            <div className="scroll-reveal" onClick={() => setActiveSection('timeline')}>
                                <div className="card card-white card-std animate-float" style={{ animationDelay: '1.5s' }}>
                                    <div className="tape-corner"></div>
                                    <p className="font-script text-gold" style={{ fontSize: '1.5rem' }}>Save the Date</p>
                                    <p className="font-serif text-darkBlue font-bold" style={{ fontSize: '2.25rem' }}>19</p>
                                    <p className="font-serif uppercase" style={{ fontSize: '0.65rem' }}>Setembro 2026</p>
                                </div>
                            </div>
                            <div className="scroll-reveal" onClick={() => setActiveSection('timeline')} style={{ marginTop: '1rem' }}>
                                <div className="card card-gallery animate-float" style={{ animationDelay: '2.5s' }}>
                                    <p className="font-serif text-center uppercase font-bold">Cronograma</p>
                                </div>
                            </div>
                             <div className="scroll-reveal" onClick={() => setActiveSection('minigames')} style={{ marginTop: '1rem' }}>
                                <div className="card card-white card-timeline animate-float" style={{ padding: '1.5rem 0.5rem', textAlign: 'center', animationDelay: '1s' }}>
                                    <p className="font-script text-gold" style={{ fontSize: '1.3rem' }}>Jogar</p>
                                    <p className="font-serif uppercase font-bold text-darkBlue">Quiz & Jogos</p>
                                </div>
                            </div>
                            <div className="scroll-reveal" onClick={() => setActiveSection('faq')} style={{ marginTop: '1rem' }}>
                                <div className="card card-faq animate-float" style={{ animationDelay: '3s' }}>
                                    <p className="font-serif font-bold" style={{ fontSize: '1.5rem' }}>FAQS</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div style={{ position: 'absolute', bottom: '-3rem', right: '-1rem', width: '10rem', zIndex: 5, pointerEvents: 'none', opacity: 0.8 }}>
                        <FlowerCorner src="https://drive.google.com/thumbnail?id=11riu0M7xfWAuKdk56aB43kpK8pWXg5gD&sz=w1000" style={{ width: '100%', transform: 'rotate(0deg)' }} />
                    </div>

                    {activeSection && <DetailOverlay section={activeSection} onClose={() => setActiveSection(null)} />}
                </div>
            );
        };

        const App = () => {
            const [viewState, setViewState] = useState('INTRO');
            const [isPlaying, setIsPlaying] = useState(false);

            useEffect(() => {
                if (viewState === 'INTRO') {
                    const timer = setTimeout(() => setViewState('ENVELOPE'), 2500);
                    return () => clearTimeout(timer);
                }
            }, [viewState]);

            const handleStartAudio = () => {
                const audio = document.getElementById('bg-music');
                if (audio && !isPlaying) {
                    audio.volume = 0.4;
                    audio.play().then(() => setIsPlaying(true)).catch(console.error);
                }
            };

            const toggleAudio = () => {
                const audio = document.getElementById('bg-music');
                if (!audio) return;
                if (isPlaying) audio.pause();
                else audio.play();
                setIsPlaying(!isPlaying);
            };

            return (
                <div className="app-wrapper">
                    <audio id="bg-music" loop src={AUDIO_BG} style={{ display: 'none' }}></audio>
                    <button onClick={toggleAudio} style={{ position: 'fixed', bottom: '1.5rem', right: '1.5rem', zIndex: 999, width: '3.5rem', height: '3.5rem', borderRadius: '50%', backgroundColor: '#A3B18A', border: 'none', boxShadow: '0 4px 10px rgba(0,0,0,0.3)', display: 'flex', alignItems: 'center', justifyContent: 'center', color: 'white' }}>
                        {isPlaying ? <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg> : <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M9 18V5l12-2v13"></path><circle cx="6" cy="18" r="3"></circle><circle cx="18" cy="16" r="3"></circle></svg>}
                    </button>

                    <div className="bg-color-layer"></div>
                    <div className="bg-overlay"></div>

                    {viewState === 'INTRO' && (
                        <div className="intro-overlay">
                            <div className="intro-text"><img src={IMG_LOGO} style={{ width: '100%' }} /></div>
                        </div>
                    )}

                    <div className="main-container">
                        <div className="paper-texture"></div>
                        <div style={{ flex: 1, width: '100%', height: '100%', position: 'relative', zIndex: 10 }}>
                            {viewState === 'DASHBOARD' ? <DashboardScreen isAudioPlaying={isPlaying} onToggleAudio={toggleAudio} /> : <EnvelopeScreen onOpen={() => setViewState('DASHBOARD')} onStartAudio={handleStartAudio} />}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>